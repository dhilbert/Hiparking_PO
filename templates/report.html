{% extends "layout.html" %}

{% block page_title %}
Report
{% endblock %}

{% block content %}

<!-- ì œëª© -->
<div class="mb-10">
  <h2 class="text-3xl font-bold text-gray-800">ë¦¬í¬íŠ¸ ì¡°íšŒ</h2>
  <p class="text-gray-600 mt-2">ê¸°ê°„ ë° ìœ í˜•ì„ ì„ íƒí•˜ì—¬ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</div>

<!-- ê²€ìƒ‰ ì¡°ê±´ ì˜ì—­ -->
<div class="bg-white rounded-2xl p-6 shadow-md border border-gray-200 mb-12">

  <form method="GET" action="/report">

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

      <!-- ì‹œì‘ì¼ -->
      <div>
        <label class="block mb-2 text-gray-700 font-medium">ì‹œì‘ì¼</label>
        <input type="date" name="start" class="w-full border rounded-lg p-3 focus:ring-2 focus:ring-orange-400">
      </div>

      <!-- ì¢…ë£Œì¼ -->
      <div>
        <label class="block mb-2 text-gray-700 font-medium">ì¢…ë£Œì¼</label>
        <input type="date" name="end" class="w-full border rounded-lg p-3 focus:ring-2 focus:ring-orange-400">
      </div>

      <!-- ë¦¬í¬íŠ¸ ìœ í˜• -->
      <div>
        <label class="block mb-2 text-gray-700 font-medium">ë¦¬í¬íŠ¸ ìœ í˜•</label>
        <select name="type" class="w-full border rounded-lg p-3 focus:ring-2 focus:ring-orange-400">
          <option value="">ì„ íƒí•˜ì„¸ìš”</option>
          <option value="sales">ë§¤ì¶œ ë³´ê³ ì„œ</option>
          <option value="payment">ê²°ì œ ë³´ê³ ì„œ</option>
          <option value="dms">DMS ë§¤ì…Â·ë§¤ì¶œ</option>
          <option value="order">ì£¼ë¬¸ì„œ í˜„í™©</option>
          <option value="refund">ì·¨ì†Œ/í™˜ë¶ˆ í˜„í™©</option>
        </select>
      </div>

    </div>

    <!-- ë²„íŠ¼ -->
    <div class="flex items-center gap-4 mt-8">
      <button class="px-6 py-3 bg-orange-500 text-white rounded-xl shadow hover:bg-orange-600">
        ğŸ” ì¡°íšŒí•˜ê¸°
      </button>

      {% if results %}
      <a href="/report/download?start={{start}}&end={{end}}&type={{type}}"
         class="px-6 py-3 bg-gray-800 text-white rounded-xl hover:bg-gray-900">
        ğŸ“¥ ë‹¤ìš´ë¡œë“œ
      </a>
      {% endif %}
    </div>

  </form>
</div>

<!-- ì¡°íšŒ ê²°ê³¼ -->
{% if results %}

<div class="mb-6">
  <h3 class="text-xl font-semibold text-gray-800 mb-3">ì¡°íšŒ ê²°ê³¼</h3>
  <div class="h-1 w-20 bg-gradient-to-r from-[#ff6b35] to-[#ff8c5a] rounded-full"></div>
</div>

<div class="overflow-auto bg-white rounded-2xl border shadow">
  <table class="w-full text-sm text-left border-collapse">

    <thead class="bg-gray-50 border-b">
      <tr>
        {% for col in results[0].keys() %}
        <th class="py-3 px-4 text-gray-700 font-semibold border-r">{{ col }}</th>
        {% endfor %}
      </tr>
    </thead>

    <tbody>
      {% for row in results %}
      <tr class="border-b hover:bg-gray-50">
        {% for col in row.values() %}
        <td class="py-3 px-4 border-r">{{ col }}</td>
        {% endfor %}
      </tr>
      {% endfor %}
    </tbody>

  </table>
</div>

{% elif searched %}
<div class="text-center text-gray-600 text-lg mt-10">
  ì¡°íšŒëœ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.
</div>
{% endif %}

{% endblock %}
