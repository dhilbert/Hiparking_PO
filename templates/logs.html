{% extends "layout.html" %}

{% block page_title %}
Logs
{% endblock %}

{% block content %}

<!-- ì œëª© -->
<div class="mb-10">
  <h2 class="text-3xl font-bold text-gray-800">ì‹œìŠ¤í…œ ë¡œê·¸ ì¡°íšŒ</h2>
  <p class="text-gray-600 mt-2">ë‚ ì§œ, ë ˆë²¨, í‚¤ì›Œë“œë¡œ ì‹œìŠ¤í…œ ê¸°ë¡ì„ ê²€ìƒ‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</div>

<!-- ê²€ìƒ‰ ì˜ì—­ -->
<div class="bg-white rounded-2xl p-6 shadow-md border border-gray-200 mb-12">

  <form method="GET" action="/logs">

    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

      <!-- ë‚ ì§œ -->
      <div>
        <label class="block mb-2 text-gray-700 font-medium">ë‚ ì§œ</label>
        <input type="date" name="date" value="{{ date }}" 
               class="w-full border rounded-lg p-3 focus:ring-2 focus:ring-orange-400">
      </div>

      <!-- ë¡œê·¸ ë ˆë²¨ -->
      <div>
        <label class="block mb-2 text-gray-700 font-medium">ë¡œê·¸ ë ˆë²¨</label>
        <select name="level" class="w-full border rounded-lg p-3 focus:ring-2 focus:ring-orange-400">
          <option value="">ì „ì²´</option>
          <option value="INFO"  {% if level == 'INFO' %}selected{% endif %}>INFO</option>
          <option value="WARN"  {% if level == 'WARN' %}selected{% endif %}>WARN</option>
          <option value="ERROR" {% if level == 'ERROR' %}selected{% endif %}>ERROR</option>
        </select>
      </div>

      <!-- í‚¤ì›Œë“œ -->
      <div>
        <label class="block mb-2 text-gray-700 font-medium">í‚¤ì›Œë“œ</label>
        <input type="text" name="keyword" value="{{ keyword }}" placeholder="ex: ì£¼ë¬¸ì„œ / ê²°ì œ / ë°°í¬"
               class="w-full border rounded-lg p-3 focus:ring-2 focus:ring-orange-400">
      </div>

    </div>

    <div class="flex items-center gap-4 mt-8">
      <button class="px-6 py-3 bg-orange-500 text-white rounded-xl shadow hover:bg-orange-600">
        ğŸ” ì¡°íšŒí•˜ê¸°
      </button>

      {% if logs %}
      <a href="/logs/download?date={{date}}&level={{level}}&keyword={{keyword}}"
         class="px-6 py-3 bg-gray-800 text-white rounded-xl hover:bg-gray-900">
        ğŸ“¥ ë‹¤ìš´ë¡œë“œ
      </a>
      {% endif %}
    </div>

  </form>
</div>


<!-- ê²°ê³¼ -->
{% if logs %}

<div class="mb-6">
  <h3 class="text-xl font-semibold text-gray-800 mb-3">ë¡œê·¸ ê²°ê³¼</h3>
  <div class="h-1 w-20 bg-gradient-to-r from-[#ff6b35] to-[#ff8c5a] rounded-full"></div>
</div>

<div class="overflow-auto bg-white rounded-2xl border shadow max-h-[600px]">
  <table class="w-full text-sm text-left border-collapse">

    <thead class="bg-gray-50 border-b">
      <tr>
        <th class="py-3 px-4 border-r text-gray-700 font-semibold">ì‹œê°„</th>
        <th class="py-3 px-4 border-r text-gray-700 font-semibold">ë ˆë²¨</th>
        <th class="py-3 px-4 border-r text-gray-700 font-semibold">ë©”ì‹œì§€</th>
      </tr>
    </thead>

    <tbody>
      {% for log in logs %}
      <tr class="border-b hover:bg-gray-50">

        <td class="py-3 px-4 border-r text-gray-700">
          {{ log.time }}
        </td>

        <!-- ë ˆë²¨: ìƒ‰ìƒ ê°•ì¡° -->
        <td class="py-3 px-4 border-r font-semibold
          {% if log.level == 'INFO' %} text-blue-600 {% endif %}
          {% if log.level == 'WARN' %} text-yellow-600 {% endif %}
          {% if log.level == 'ERROR' %} text-red-600 {% endif %}
        ">
          {{ log.level }}
        </td>

        <td class="py-3 px-4 text-gray-800">
          {{ log.message }}
        </td>

      </tr>
      {% endfor %}
    </tbody>

  </table>
</div>

{% elif searched %}
<div class="text-center text-gray-600 text-lg mt-10">
  ì¡°íšŒëœ ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.
</div>
{% endif %}

{% endblock %}
