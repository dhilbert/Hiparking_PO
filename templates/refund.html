{% extends "layout.html" %}

{% block content %}
<div class="container" style="max-width: 600px; margin: 0 auto;">

    <h2 style="text-align:center; margin-bottom:20px;">ì •ê¸°ê¶Œ í™˜ë¶ˆ ê³„ì‚°ê¸°</h2>

    <form method="POST">

        <!-- ====================== ìš”ê¸ˆí‘œ ì…ë ¥ ====================== -->
        <h3>ğŸ“Œ ìš”ê¸ˆí‘œ ì…ë ¥</h3>

        {% for i in range(1, 13) %}
            <label>{{ i }}ì›” ìš”ê¸ˆ:</label>
            <input class="form-control"
                type="number"
                name="MonthPrice_{{ i }}"
                value="{{ request.form.get('MonthPrice_' ~ i, '100000') }}">
        {% endfor %}

        <hr>

        <!-- ====================== ìº¡ ìš”ê¸ˆ ====================== -->
        <h3>ğŸ“Œ ìº¡ ìš”ê¸ˆ</h3>

        <label>í‰ì¼ ì¼ìµœëŒ€ìš”ê¸ˆ:</label>
        <input class="form-control" type="number" name="cap_weekday"
               value="{{ request.form.get('cap_weekday', '10000') }}">

        <label>í† ìš”ì¼ ì¼ìµœëŒ€ìš”ê¸ˆ:</label>
        <input class="form-control" type="number" name="cap_sat"
               value="{{ request.form.get('cap_sat', '8000') }}">

        <label>ì¼ìš”ì¼ ì¼ìµœëŒ€ìš”ê¸ˆ:</label>
        <input class="form-control" type="number" name="cap_sun"
               value="{{ request.form.get('cap_sun', '5000') }}">

        <hr>

        <!-- ====================== ì„œë¹„ìŠ¤ ê¸°ê°„ ====================== -->
        <h3>ğŸ“Œ ì„œë¹„ìŠ¤ ê¸°ê°„</h3>

        <label>ì„œë¹„ìŠ¤ ì‹œì‘ì¼:</label>
        <input class="form-control" type="date" name="FromDate"
               value="{{ request.form.get('FromDate', '2025-10-13') }}">

        <label>ì„œë¹„ìŠ¤ ì¢…ë£Œì¼:</label>
        <input class="form-control" type="date" name="ToDate"
               value="{{ request.form.get('ToDate', '2025-12-31') }}">

        <label>êµ¬ë§¤ìˆ˜ëŸ‰:</label>
        <input class="form-control" type="number" name="buy_count"
               value="{{ request.form.get('buy_count', '1') }}">

        <hr>

        <!-- ====================== í™˜ë¶ˆ ì •ë³´ ====================== -->
        <h3>ğŸ“Œ í™˜ë¶ˆ ì •ë³´</h3>

        <label>í™˜ë¶ˆ ìš”ì²­ ìˆ˜ëŸ‰:</label>
        <input class="form-control" type="number" name="refund_count"
               value="{{ request.form.get('refund_count', '1') }}">

        <label>í™˜ë¶ˆì¼ì:</label>
        <input class="form-control" type="date" name="refund_date"
               value="{{ request.form.get('refund_date', '2025-11-06') }}">

        <button class="btn btn-primary" style="margin-top:20px;">ê³„ì‚°í•˜ê¸°</button>

    </form>

    <!-- ====================== ì¶œë ¥í‘œ ====================== -->
    {% if result %}
        <h3 style="margin-top:30px;">ğŸ“Œ ì¶œë ¥í‘œ</h3>

        <div class="alert alert-info">
            ìŠ¹ì¸ ê¸ˆì•¡: <b>{{ result.total_parking_pass_price }}</b>
        </div>

        <div class="alert alert-warning">
            ì·¨ì†Œ ê¸ˆì•¡: <b>{{ result.middle_month_total + result.cancel_fee }}</b>
        </div>

        <div class="alert alert-success">
            ì·¨ì†Œ ì”ì•¡: <b>{{ result.total_parking_pass_price - (result.middle_month_total + result.cancel_fee) }}</b>
        </div>
    {% endif %}

</div>
{% endblock %}
